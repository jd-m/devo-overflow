<head>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="jquery-3.6.0.min.js"></script>
  <script>

  </script>
  <link rel="stylesheet" href="css/site.css">
</head>

<div class="header col-12 test">
  <a href="index.html">
  <h1 class="center">Devo_Overflow</h1>
     </a>
  <div class="triple-line">
    <hr style="margin-left:40%; margin-right:40%;">
    <hr style="margin-left:45%; margin-right:45%;">
    <hr style="margin-left:48%; margin-right:48%;">
    

  </div>
</div>
<div class="col-3 disappear side">
  
  
  <a href="posts-html/post-series.html"><h2>Post Series</h2></a>
  <ul id="series">
    <li><a href="posts-html/post-series.html#20220602142630">Mining for Wisdom</a></li>
    <li><a href="posts-html/post-series.html#20220602191239">Thought for the Day</a></li>
    <li><a href="posts-html/post-series.html#20220602191235">Who do you say I am?</a></li>
    <li><a href="posts-html/post-series.html#20220602191220">Teach Like A Christian</a></li>
  </ul>

  <a href="tags.html"><h2>Tags</h2></a>
  <ul id="taglist" ></ul>
</div>
<div  class="col-6 test content center">
  <h2>Posts</h2>
  <div id="posts"></div>
  <button id="prevButton" class="pagebutton" onclick="prevPage()" >Previous</button>
  <button id="nextButton" class="pagebutton" style="float: right"  onclick="nextPage()" >Next</button>

  <script>
    function makeArticleCard(file) {
        $.get(file, function (data) {
            $('#posts').append(

                    "<a href=\"" + file + "\">" +
                    "<div class=\"card center\">" + 
                    "<h4><span class=\"date\">"+$(data).find("#date").html()+"</span><span>"+$(data).find("#title").html()+"</span></h4>" +
                    "<p class=\"disappear\">" + $(data).find("p").text().substring(0,150) + "..." + "</p>" +
                    "</div>" + 
                  "</a>"
            );
        });      
    }

    var pageIndex = 0, pageIncrement = 3, numArticles = 4;

    $.getJSON('article-db.json',function(data) {

        numArticles = Math.ceil(data.posts.length/pageIncrement) * pageIncrement;
        
        //Initial Button State
        if ((pageIndex + pageIncrement) >= numArticles) {
            $('#nextButton').prop('disabled', true);
        }
        if ((pageIndex - pageIncrement) <= 0) {
            $('#prevButton').prop('disabled', true);
        }
        
    });
        
    function updatePosts() {
        
        
        $.getJSON('article-db.json',function(data) {
            var jd;
            jd = data.posts;
            jd.sort(function(a,b) {
                return a - b;
            });
            
            $('#posts').empty();
            for (let i = 0; i < pageIncrement; i++){
                let articleFile = jd[pageIndex + i].file;
                if (articleFile !== undefined) {
                    makeArticleCard('posts-html/' + articleFile);
                    
                }
            }
            $("#posts").scrollIntoView(false);
                       
        });
    }
    
    function incPageIndex(inc) {
        let newPageIndex = Math.min(Math.max(pageIndex + inc, 0), numArticles);
        pageIndex = newPageIndex;
    }
    
    function nextPage(){
        let prevPageIndex = pageIndex;
        incPageIndex(pageIncrement);
        if (prevPageIndex !== pageIndex) {
            updatePosts();
        }
        
        if ((pageIndex + pageIncrement) >= numArticles) {
            $('#nextButton').prop('disabled', true);
        }
            
        if ($('#prevButton').prop('disabled') == true) {
            $('#prevButton').prop('disabled', false)
        } 
    }

    function prevPage(){
        let prevPageIndex = pageIndex;
        incPageIndex(pageIncrement * -1);
        if (prevPageIndex !== pageIndex) {
            updatePosts();
        }

        if ((pageIndex - pageIncrement) <= 0) {
            $('#prevButton').prop('disabled', true);
        }
        
        if ($('#nextButton').prop('disabled') == true) {
            $('#nextButton').prop('disabled', false);
        }
    }

    $.getJSON('article-db.json',function(data) {
        $.each(data.taglist, function(key, value){
            $('#taglist').append("<a href=\"tags.html#"+value+ "\"><li>" + value + "</li></a>")
        })
        
    });
    
    updatePosts();
    </script>
</div>
<!-- <hr class="appear"> -->
<div class="side disappear col-3 test">
  
  <h2>About</h2>
  <p> This blog contains some thoughts on the bible, the Christian faith, and some reflections on living it out practically.</p>
    
</div>
<div class="footer" style="test"></div>
